<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš°ë¦¬ë“¤ì˜ ì†Œì¤‘í•œ ê¸°ë¡ - Mate Diary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; transition: background 1.5s ease; min-height: 100vh; }
        .font-handwriting { font-family: 'Nanum Pen Script', cursive; }
        .diary-card { transition: all 0.3s ease; }
        .diary-card:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .loading-spinner { border: 3px solid #f3f3f3; border-top: 3px solid #5eead4; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .blurred-content { filter: blur(10px); pointer-events: none; user-select: none; }
        .lock-overlay { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(255, 255, 255, 0.4); backdrop-filter: blur(4px); border-radius: 1.5rem; z-index: 10; }
        
        /* í—¤ë” íˆ¬ëª…ë„ ì¡°ì ˆ */
        header { transition: background 1s ease; }
    </style>
</head>
<body id="main-body" class="bg-slate-50 text-slate-800">

    <!-- ì—°ê²° ì „ í™”ë©´ -->
    <div id="connection-screen" class="fixed inset-0 bg-slate-100 z-50 flex items-center justify-center p-4">
        <div class="bg-white p-8 rounded-3xl shadow-2xl max-w-sm w-full text-center border border-slate-200">
            <h2 class="text-3xl font-bold text-teal-600 mb-6 font-handwriting">í•¨ê»˜ ì¼ê¸° ì“°ê¸°</h2>
            
            <div id="setup-step-1">
                <p class="text-slate-500 mb-8 text-sm leading-relaxed">ê³µìœ  ì½”ë“œë¥¼ í†µí•´ ì¹œêµ¬ë‚˜ ì†Œì¤‘í•œ ì‚¬ëŒê³¼<br>ì¼ê¸°ì¥ì„ ì—°ê²°í•´ ë³´ì„¸ìš”.</p>
                <button id="btn-show-join" class="w-full bg-teal-500 text-white font-bold py-3.5 rounded-2xl mb-3 hover:bg-teal-600 transition shadow-lg shadow-teal-100">ì½”ë“œ ì…ë ¥í•˜ê³  ì‹œì‘í•˜ê¸°</button>
                <button id="btn-create-code" class="w-full bg-white border-2 border-teal-500 text-teal-500 font-bold py-3.5 rounded-2xl hover:bg-teal-50 transition">ìƒˆë¡œìš´ ì—°ê²° ì½”ë“œ ë§Œë“¤ê¸°</button>
            </div>

            <div id="setup-step-join" class="hidden">
                <p class="text-sm text-slate-500 mb-4 text-center">ìš°ë¦¬ë§Œì˜ ê³ ìœ  ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
                <input id="join-code-input" type="text" placeholder="6ìë¦¬ ì½”ë“œ ì…ë ¥" class="w-full p-4 rounded-2xl bg-slate-50 mb-4 border-2 border-transparent focus:border-teal-300 outline-none text-center font-bold tracking-widest uppercase text-xl">
                <button id="btn-join-couple" class="w-full bg-teal-500 text-white font-bold py-3.5 rounded-2xl mb-3">ì¼ê¸°ì¥ ì…ì¥í•˜ê¸°</button>
                <button id="btn-back-to-step1" class="text-slate-400 text-sm underline cursor-pointer">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>

            <div id="setup-step-code" class="hidden">
                <p class="text-sm text-slate-500 mb-3">ìƒëŒ€ë°©ì—ê²Œ ì´ ì½”ë“œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”</p>
                <div id="generated-code-display" class="text-3xl font-bold text-teal-600 tracking-widest mb-6 bg-teal-50 py-5 rounded-2xl border-2 border-dashed border-teal-200">------</div>
                <div class="flex flex-col items-center gap-3">
                    <div class="loading-spinner"></div>
                    <p class="text-xs text-teal-500 animate-pulse">ìƒëŒ€ë°©ì˜ ì—°ê²°ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
                    <button id="btn-cancel-code" class="mt-4 text-slate-400 text-sm underline cursor-pointer">ìƒì„± ì·¨ì†Œ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì•± í™”ë©´ -->
    <header id="main-header" class="bg-white/70 backdrop-blur-md sticky top-0 z-40 shadow-sm py-6 px-4 text-center border-b border-white/20">
        <div class="max-w-4xl mx-auto relative flex flex-col items-center">
            <button id="btn-logout" class="absolute top-0 right-0 text-[10px] text-slate-400 hover:text-slate-600 underline uppercase">ì—°ê²° í•´ì œ</button>
            <div class="flex items-center gap-2 mb-1">
                <span class="text-2xl">ğŸ“’</span>
                <h1 class="text-2xl font-bold text-slate-700">ìš°ë¦¬ë“¤ì˜ ê¸°ë¡ ê³µê°„</h1>
            </div>
            <div class="flex flex-col items-center mt-3">
                <p id="d-day-display" class="text-3xl font-bold text-teal-500 font-handwriting">ì—°ê²° ì¤‘...</p>
                <div class="flex items-center gap-2 text-xs text-slate-500 mt-1">
                    <span class="w-2 h-2 rounded-full bg-green-400"></span>
                    <span>í•¨ê»˜í•œ ì§€ <span id="days-count" class="font-bold">0</span>ì¼</span>
                </div>
            </div>
            
            <div id="partner-mood-status" class="md:absolute md:top-6 md:right-0 mt-4 md:mt-0 text-sm bg-white/80 border border-white/50 px-4 py-2 rounded-full hidden flex items-center gap-2 shadow-sm">
                <span class="text-slate-500 font-medium text-xs">ìƒëŒ€ë°© ê¸°ë¶„:</span> 
                <span id="partner-mood-emoji" class="text-lg">?</span>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-6">
        <!-- ì¼ê¸° ì‘ì„± ì„¹ì…˜ -->
        <section id="write-section" class="bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-sm mb-12 border border-white/50">
            <div class="flex items-center gap-2 mb-6">
                <div class="w-8 h-8 bg-teal-100 rounded-full flex items-center justify-center text-teal-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                    </svg>
                </div>
                <h2 class="text-lg font-bold text-slate-700">ì˜¤ëŠ˜ì˜ ì¼ê¸° ë‚¨ê¸°ê¸°</h2>
            </div>
            
            <div class="space-y-4">
                <input id="diary-title" type="text" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full p-4 rounded-2xl bg-white/50 border border-slate-200 outline-none focus:border-teal-300 transition-colors">
                <textarea id="diary-content" rows="4" placeholder="ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë• ë‚˜ìš”?" class="w-full p-4 rounded-2xl bg-white/50 border border-slate-200 outline-none focus:border-teal-300 transition-colors resize-none"></textarea>
                
                <div class="flex flex-wrap justify-between items-center gap-4 pt-2">
                    <div class="flex items-center gap-3 bg-white/50 px-4 py-2 rounded-2xl border border-slate-200">
                        <span class="text-xs text-slate-500 font-medium">ì§€ê¸ˆ ë‚´ ê¸°ë¶„</span>
                        <select id="diary-mood" class="bg-transparent text-sm text-slate-700 font-bold outline-none cursor-pointer">
                            <option value="ğŸ˜Š">í‰ì˜¨í•´ìš” ğŸ˜Š</option>
                            <option value="ğŸš€">ì˜ìš•ë¿œë¿œ ğŸš€</option>
                            <option value="ğŸ•">ë§›ë‚œê±° ë¨¹ìŒ ğŸ•</option>
                            <option value="â˜•">ì—¬ìœ ë¡œì›Œìš” â˜•</option>
                            <option value="ğŸ˜´">í”¼ê³¤í•´ìš” ğŸ˜´</option>
                            <option value="âœ¨">ì¦ê±°ì›Œìš” âœ¨</option>
                        </select>
                    </div>
                    <button id="btn-save-diary" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-10 rounded-2xl shadow-lg transition duration-300 w-full md:w-auto">
                        ì¼ê¸° ê³µìœ í•˜ê¸°
                    </button>
                </div>
            </div>
        </section>

        <!-- ê¸°ë¡ ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ -->
        <section>
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-xl font-bold text-slate-700 flex items-center gap-2">
                    <span class="text-teal-500 italic">#</span> ìš°ë¦¬ì˜ ê¸°ë¡ë“¤
                </h2>
                <span id="current-code-tag" class="text-[10px] bg-white/50 text-slate-400 px-2 py-1 rounded font-bold border border-slate-200">ì½”ë“œ: ------</span>
            </div>
            
            <div id="unlock-msg" class="hidden mb-6 p-4 bg-white/60 backdrop-blur-md border border-amber-200 rounded-2xl text-amber-700 text-sm text-center font-medium shadow-sm">
                ğŸ”’ ë‘ ì‚¬ëŒ ëª¨ë‘ ì˜¤ëŠ˜ ì¼ê¸°ë¥¼ ì¨ì•¼ ìƒëŒ€ë°©ì˜ ì¼ê¸°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”!
            </div>

            <div id="diary-list" class="grid grid-cols-1 md:grid-cols-2 gap-6 relative pb-20">
                <div class="col-span-full py-20 text-center text-slate-400 border-2 border-dashed border-white/40 rounded-3xl">
                    ì²« ì¼ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”.
                </div>
            </div>
        </section>
    </main>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc, collection, query, onSnapshot, addDoc, serverTimestamp, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

        let firebaseConfig = {
            apiKey: "AIzaSyDtSUc85we39I7pYhf_WJzBwlkOizX2JwU",
            authDomain: "third-project-37e17.firebaseapp.com",
            projectId: "third-project-37e17",
            storageBucket: "third-project-37e17.firebasestorage.app",
            messagingSenderId: "991625394860",
            appId: "1:991625394860:web:418f5e8877359f892b3d09",
            measurementId: "G-KBF7K5FGKV"
        };

        if (typeof __firebase_config !== 'undefined') {
            firebaseConfig = JSON.parse(__firebase_config);
        }

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'mate-diary-unified-v1';

        let currentUser = null;
        let activeCode = localStorage.getItem('mate_active_code');
        
        // ê°ì •ë³„ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ (ë¶€ë“œëŸ¬ìš´ íŒŒìŠ¤í…”í†¤)
        const moodColors = {
            "ğŸ˜Š": "#e8f5e9", // í‰ì˜¨ (ê·¸ë¦°)
            "ğŸš€": "#e3f2fd", // ì˜ìš• (ë¸”ë£¨)
            "ğŸ•": "#fff3e0", // ë§›ë‚¨ (ì˜¤ë Œì§€)
            "â˜•": "#f3e5f5", // ì—¬ìœ  (í¼í”Œ)
            "ğŸ˜´": "#eceff1", // í”¼ê³¤ (ê·¸ë ˆì´)
            "âœ¨": "#fffde7"  // ì¦ê±°ì›€ (ì˜ë¡œìš°)
        };

        const initAuth = async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (err) { console.error("ì¸ì¦ ì—ëŸ¬:", err); }
        };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                if (activeCode) startApp(activeCode);
            }
        });

        initAuth();

        const generateHexCode = () => Math.random().toString(36).substring(2, 8).toUpperCase();

        const createShareCode = async () => {
            if (!currentUser) return;
            const newCode = generateHexCode();
            document.getElementById('generated-code-display').innerText = newCode;
            document.getElementById('setup-step-1').classList.add('hidden');
            document.getElementById('setup-step-code').classList.remove('hidden');

            const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', newCode);
            try {
                await setDoc(roomRef, {
                    hostId: currentUser.uid,
                    createdAt: serverTimestamp(),
                    status: 'waiting',
                    startDate: new Date().toISOString(),
                    lastMood: { [currentUser.uid]: 'ğŸ˜Š' },
                    lastWrittenDate: { [currentUser.uid]: '' }
                });

                onSnapshot(roomRef, (snapshot) => {
                    const data = snapshot.data();
                    if (data && data.status === 'connected') {
                        localStorage.setItem('mate_active_code', newCode);
                        startApp(newCode);
                    }
                });
            } catch (err) { alert("ì½”ë“œ ìƒì„± ì‹¤íŒ¨"); }
        };

        const joinCouple = async () => {
            if (!currentUser) return;
            const code = document.getElementById('join-code-input').value.trim().toUpperCase();
            if (!code) return alert('ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.');

            try {
                const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', code);
                const roomSnap = await getDoc(roomRef);
                if (!roomSnap.exists()) return alert('ì½”ë“œë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ì„¸ìš”.');

                const data = roomSnap.data();
                if (data.status === 'waiting' && data.hostId !== currentUser.uid) {
                    await updateDoc(roomRef, {
                        status: 'connected',
                        guestId: currentUser.uid,
                        [`lastMood.${currentUser.uid}`]: 'ğŸ˜Š',
                        [`lastWrittenDate.${currentUser.uid}`]: ''
                    });
                    localStorage.setItem('mate_active_code', code);
                    startApp(code);
                } else {
                    localStorage.setItem('mate_active_code', code);
                    startApp(code);
                }
            } catch (err) { alert("ì—°ê²° ì˜¤ë¥˜"); }
        };

        // ê°ì • ê¸°ë°˜ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ ì—…ë°ì´íŠ¸ ë¡œì§
        function updateTheme(moods) {
            const body = document.getElementById('main-body');
            const header = document.getElementById('main-header');
            const myId = currentUser.uid;
            const partnerId = Object.keys(moods).find(id => id !== myId);
            
            const myColor = moodColors[moods[myId]] || "#f8fafc";
            
            if (partnerId && moods[partnerId]) {
                const partnerColor = moodColors[moods[partnerId]] || "#f8fafc";
                
                if (moods[myId] === moods[partnerId]) {
                    // ê¸°ë¶„ì´ ê°™ìœ¼ë©´ ë‹¨ìƒ‰
                    body.style.background = myColor;
                } else {
                    // ê¸°ë¶„ì´ ë‹¤ë¥´ë©´ ë‘ ìƒ‰ìƒì„ ì„ì€ ê·¸ë¼ë°ì´ì…˜ (ì •í™•íˆ ë‘ ìƒ‰ì´ ì„ì´ë„ë¡ ì„¤ì •)
                    body.style.background = `linear-gradient(135deg, ${myColor} 0%, ${partnerColor} 100%)`;
                }
            } else {
                body.style.background = myColor;
            }
        }

        function startApp(code) {
            if (!currentUser) return;
            activeCode = code;
            document.getElementById('connection-screen').classList.add('hidden');
            document.getElementById('current-code-tag').innerText = `ì½”ë“œ: ${code}`;
            
            const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', code);
            const diaryCol = collection(db, 'artifacts', appId, 'public', 'data', 'diaries_' + code);

            onSnapshot(roomRef, (docSnap) => {
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    
                    // D-day
                    const start = new Date(data.startDate);
                    const days = Math.ceil((new Date() - start) / (1000 * 60 * 60 * 24));
                    document.getElementById('days-count').innerText = days;
                    document.getElementById('d-day-display').innerText = `Day ${days}`;

                    // ì‹¤ì‹œê°„ ê°ì • í…Œë§ˆ ì—…ë°ì´íŠ¸
                    updateTheme(data.lastMood || {});
                    
                    const partnerId = Object.keys(data.lastMood || {}).find(id => id !== currentUser.uid);
                    if (partnerId) {
                        document.getElementById('partner-mood-status').classList.remove('hidden');
                        document.getElementById('partner-mood-emoji').innerText = data.lastMood[partnerId];
                    }

                    // ì¼ê¸° ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (ì ê¸ˆ ë¡œì§ í¬í•¨)
                    renderDiaries(diaryCol, data.lastWrittenDate || {});
                }
            });
        }

        function renderDiaries(col, writtenDates) {
            const todayStr = new Date().toLocaleDateString();
            const myWritten = writtenDates[currentUser.uid] === todayStr;
            const partnerId = Object.keys(writtenDates).find(id => id !== currentUser.uid);
            const partnerWritten = partnerId ? writtenDates[partnerId] === todayStr : false;
            
            const isAllWritten = myWritten && partnerWritten;
            const unlockMsg = document.getElementById('unlock-msg');

            // í•œ ëª…ì´ë¼ë„ ì˜¤ëŠ˜ ì¼ê¸°ë¥¼ ì•ˆ ì¼ìœ¼ë©´ ë©”ì‹œì§€ ë…¸ì¶œ
            if (partnerId && !isAllWritten) {
                unlockMsg.classList.remove('hidden');
            } else {
                unlockMsg.classList.add('hidden');
            }

            onSnapshot(col, (snapshot) => {
                const list = document.getElementById('diary-list');
                const diaries = [];
                snapshot.forEach(doc => diaries.push(doc.data()));
                
                if (diaries.length === 0) {
                    list.innerHTML = '<div class="col-span-full py-20 text-center text-slate-400 border-2 border-dashed border-white/40 rounded-3xl">ì²« ë²ˆì§¸ ì¼ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”.</div>';
                    return;
                }

                list.innerHTML = '';
                diaries.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));

                diaries.forEach(data => {
                    const isMyDiary = data.author === currentUser.uid;
                    const isToday = data.date === todayStr;
                    // ì˜¤ëŠ˜ ê¸€ì¸ë° ë‘˜ ë‹¤ ì“°ì§€ ì•Šì•˜ê³  ë‚´ ê¸€ì´ ì•„ë‹ˆë©´ ë¸”ëŸ¬ ì²˜ë¦¬
                    const isLocked = isToday && !isAllWritten && !isMyDiary;

                    const card = document.createElement('div');
                    card.className = `diary-card relative bg-white/90 backdrop-blur-sm p-6 rounded-3xl shadow-sm border border-white/50 flex flex-col ${isMyDiary ? 'ring-2 ring-teal-400/20' : ''}`;
                    
                    const contentHtml = `
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-[10px] font-bold text-slate-400 uppercase bg-slate-100/50 px-2 py-1 rounded">${data.date}</span>
                            <span class="text-xl">${data.mood}</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2 text-slate-800">${data.title}</h3>
                        <p class="text-slate-600 text-sm leading-relaxed whitespace-pre-wrap">${data.content}</p>
                        <div class="mt-4 pt-4 border-t border-slate-100 flex items-center justify-between">
                            <span class="text-[10px] text-slate-400 font-bold uppercase">${isMyDiary ? 'ME' : 'PARTNER'}</span>
                        </div>
                    `;

                    if (isLocked) {
                        card.innerHTML = `
                            <div class="blurred-content">${contentHtml}</div>
                            <div class="lock-overlay">
                                <span class="text-2xl mb-1">ğŸ”’</span>
                                <p class="text-[10px] font-bold text-slate-500 uppercase">Hidden Today</p>
                            </div>
                        `;
                    } else {
                        card.innerHTML = contentHtml;
                    }
                    list.appendChild(card);
                });
            });
        }

        const saveDiary = async () => {
            if (!currentUser || !activeCode) return;
            const title = document.getElementById('diary-title').value.trim();
            const content = document.getElementById('diary-content').value.trim();
            const mood = document.getElementById('diary-mood').value;
            if (!title || !content) return alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”.');

            const todayStr = new Date().toLocaleDateString();

            try {
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'diaries_' + activeCode), {
                    title, content, mood,
                    author: currentUser.uid,
                    date: todayStr,
                    createdAt: serverTimestamp()
                });
                
                const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', activeCode);
                await updateDoc(roomRef, { 
                    [`lastMood.${currentUser.uid}`]: mood,
                    [`lastWrittenDate.${currentUser.uid}`]: todayStr
                });

                document.getElementById('diary-title').value = '';
                document.getElementById('diary-content').value = '';
            } catch (e) { alert("ì €ì¥ ì‹¤íŒ¨"); }
        };

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('btn-show-join').addEventListener('click', () => {
            document.getElementById('setup-step-1').classList.add('hidden');
            document.getElementById('setup-step-join').classList.remove('hidden');
        });
        document.getElementById('btn-create-code').addEventListener('click', createShareCode);
        document.getElementById('btn-join-couple').addEventListener('click', joinCouple);
        document.getElementById('btn-back-to-step1').addEventListener('click', () => {
            document.getElementById('setup-step-join').classList.add('hidden');
            document.getElementById('setup-step-1').classList.remove('hidden');
        });
        document.getElementById('btn-save-diary').addEventListener('click', saveDiary);
        document.getElementById('btn-logout').addEventListener('click', () => {
            if(confirm('ê¸°ê¸° ì—°ê²°ì„ í•´ì œí• ê¹Œìš”?')) {
                localStorage.removeItem('mate_active_code');
                location.reload();
            }
        });
        document.getElementById('btn-cancel-code').addEventListener('click', () => location.reload());
    </script>
</body>
</html>